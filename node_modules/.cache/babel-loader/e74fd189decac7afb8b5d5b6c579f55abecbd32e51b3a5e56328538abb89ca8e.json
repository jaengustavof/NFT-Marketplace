{"ast":null,"code":"import _regeneratorRuntime from\"/home/gustavo/blockchain/Marketplace/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/gustavo/blockchain/Marketplace/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/gustavo/blockchain/Marketplace/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BrowserRouter,Routes,Route}from'react-router-dom';import Navigation from'./NavBar';import Home from'./Home';import Create from'./Create';import MyListedItems from'./MyListedItems';import MyPurchases from'./MyPurchases';import MarketplaceAbi from'../contractsData/Marketplace.json';import MarketplaceAddress from'../contractsData/Marketplace-address.json';import NFTAbi from'../contractsData/NFT.json';import NFTAddress from'../contractsData/NFT-address.json';import{useState}from'react';import{ethers}from'ethers';import{Spinner}from'react-bootstrap';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),account=_useState4[0],setAccount=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),nft=_useState6[0],setNFT=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),marketplace=_useState8[0],setMarketplace=_useState8[1];var web3Handler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var accounts,provider,signer;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return window.ethereum.request({method:'eth_requestAccounts'});case 2:accounts=_context2.sent;console.log(accounts);setAccount(accounts[0]);provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();window.ethereum.on('chainChanged',function(chainId){window.location.reload();});window.ethereum.on('accountsChanged',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(accounts){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setAccount(accounts[0]);_context.next=3;return web3Handler();case 3:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());loadContracts(signer);case 10:case\"end\":return _context2.stop();}},_callee2);}));return function web3Handler(){return _ref.apply(this,arguments);};}();var loadContracts=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(signer){var marketplace,nft;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:marketplace=new ethers.Contract(MarketplaceAddress.address,MarketplaceAbi.abi,signer);setMarketplace(marketplace);nft=new ethers.Contract(NFTAddress.address,NFTAbi.abi,signer);setNFT(nft);setLoading(false);case 5:case\"end\":return _context3.stop();}},_callee3);}));return function loadContracts(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Navigation,{web3Handler:web3Handler,account:account})}),/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'80vh'},children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",style:{display:'flex'}}),/*#__PURE__*/_jsx(\"p\",{className:\"mx-3 my-0\",children:\"Waiting for Metamask's connection...\"})]}):/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{marketplace:marketplace,nft:nft})}),/*#__PURE__*/_jsx(Route,{path:\"/create\",element:/*#__PURE__*/_jsx(Create,{marketplace:marketplace,nft:nft})})]})})]})});}export default App;","map":{"version":3,"names":["BrowserRouter","Routes","Route","Navigation","Home","Create","MyListedItems","MyPurchases","MarketplaceAbi","MarketplaceAddress","NFTAbi","NFTAddress","useState","ethers","Spinner","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","account","setAccount","_useState5","_useState6","nft","setNFT","_useState7","_useState8","marketplace","setMarketplace","web3Handler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","accounts","provider","signer","wrap","_callee2$","_context2","prev","next","window","ethereum","request","method","sent","console","log","providers","Web3Provider","getSigner","on","chainId","location","reload","_ref2","_callee","_callee$","_context","stop","_x","apply","arguments","loadContracts","_ref3","_callee3","_callee3$","_context3","Contract","address","abi","_x2","children","className","style","display","justifyContent","alignItems","minHeight","animation","path","element"],"sources":["/home/gustavo/blockchain/Marketplace/src/frontend/components/App.js"],"sourcesContent":["import {\n  BrowserRouter,\n  Routes,\n  Route\n} from 'react-router-dom';\n\nimport Navigation from './NavBar';\nimport Home from './Home';\nimport Create from './Create';\nimport MyListedItems from './MyListedItems';\nimport MyPurchases from './MyPurchases';\nimport MarketplaceAbi from '../contractsData/Marketplace.json';\nimport MarketplaceAddress from '../contractsData/Marketplace-address.json';\nimport NFTAbi from '../contractsData/NFT.json';\nimport NFTAddress from '../contractsData/NFT-address.json';\nimport { useState } from 'react';\nimport { ethers } from 'ethers';\nimport { Spinner } from 'react-bootstrap';\nimport './App.css';\n\nfunction App() {\n\n  const [loading, setLoading] = useState(true);\n  const [account, setAccount] = useState(null);\n  const [nft, setNFT] = useState({});\n  const [marketplace, setMarketplace] = useState({});\n\n  const web3Handler = async () => {\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n    console.log(accounts)\n    setAccount(accounts[0]);\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n    const signer = provider.getSigner();\n\n    window.ethereum.on('chainChanged', (chainId) => {\n      window.location.reload();\n    })\n\n    window.ethereum.on('accountsChanged', async function (accounts) {\n      setAccount(accounts[0]);\n      await web3Handler();\n    })\n\n    loadContracts(signer);\n  }\n\n  const loadContracts = async (signer) => {\n    const marketplace = new ethers.Contract(MarketplaceAddress.address, MarketplaceAbi.abi, signer);\n    setMarketplace(marketplace);\n    const nft = new ethers.Contract(NFTAddress.address, NFTAbi.abi, signer);\n    setNFT(nft);\n    setLoading(false);\n  }\n\n  return (\n    <BrowserRouter>\n      <div className='App'>\n        <>\n          <Navigation web3Handler={web3Handler} account={account} />\n        </>\n        <div>\n          {loading ? (\n            <div style={{\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              minHeight: '80vh'\n            }}>\n              <Spinner animation='border' style={{ display: 'flex' }} />\n              <p className='mx-3 my-0'>Waiting for Metamask's connection...</p>\n            </div>\n          ) : (\n            <Routes>\n              <Route path=\"/\" element={\n                <Home marketplace={marketplace} nft={nft} />\n              } />\n\n              <Route path=\"/create\" element={\n                <Create marketplace={marketplace} nft={nft} />\n              } />\n              {/*\n                              <Route path=\"/my-listed-items\" element={\n                <MyListedItems marketplace={marketplace} nft={nft} account={account} />\n              } />\n\n              <Route path=\"/my-purchases\" element={\n                <MyPurchases marketplace={marketplace} nft={nft} account={account}/>\n              } />\n              */}\n\n            </Routes>\n          )}\n        </div>\n      </div>\n    </BrowserRouter>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}